{{extend 'layout_community.html'}}
<div class="row">
  <div class="col-md-12">
    <div class="box box-primary">
      <div class="box-header">
        <h4 class="box-title text-muted">{{=T("Nginx Logs")}}</h4>
      </div>
      <div class="box-body table-responsive">

        <table id="datatable_nginx_log" class="display">
          <thead>
            <small>{{=T("Showing last 1000 lines from nginx log")}}</small>
            <br>
            <div align="right">
              <h4>
                <a class="label grey_light_bulma" onclick="download_nginx_log()">
                  <i class="fa fa-download "></i> {{=T("Download Full log")}}
                </a>
              </h4>
            </div>

            <hr>

            <tr>
              <th>#</th>
              <th>{{=T("Logs")}}</th>
            </tr>
          </thead>
          <tbody>
            <!--by now access logs will come from waf_logs function, next version will come in json from AccessLogs function-->
            {{counter = 0}}
            {{for line in log_file: }}
            {{counter +=1}}
            <tr>
              <td style="width: 10px;"> {{=counter}} </td>
              <td style="max-width: 600px; text-overflow: ellipsis; overflow: hidden;"> {{=line}}</td>

            </tr>
            {{pass}}
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>
<script>
  $(document).ready(function () {
    $("#datatable_nginx_log").dataTable(
      {
        mark: true
      }
    )
  });
</script>